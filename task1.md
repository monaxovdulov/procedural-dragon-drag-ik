# Task 1: Лапы больше и плавнее

## Цель

Сделать лапки визуально крупнее (длины/размах/толщина) и убрать "дёрганость" (реже шаги, более мягкая кривая шага, рассинхрон лево/право).

## Файлы

- `main.py`

## План реализации (минимальные правки)

1. Увеличить геометрию лап (длины костей + оффсеты опоры) через дефолты в `Dragon.__init__`.
2. Увеличить толщину линий лап в `Dragon._draw_legs`.
3. Сделать шаги реже и длиннее через `step_threshold`, `step_duration`, `step_lift` в `Dragon.__init__`.
4. Рассинхронизировать "желаемую" точку опоры лево/право в `Dragon.update()` (фазовый сдвиг).
5. (Опционально) смягчить кривую шага в `Leg.update()` без изменения логики (двойной smoothstep).

## Готовые значения (дефолтный пресет)

Правило для "красивого колена": `distance(hip, desired_foothold) ≈ 0.65..0.85 * (upper + lower)`.

В `Dragon.__init__` заменить значения на:

```python
# Лапки (размер/размах)
self.leg_upper = 34.0        # было 22.0
self.leg_lower = 28.0        # было 18.0
self.leg_hip_offset = 12.0   # было 9.0
self.leg_spread = 42.0       # было 24.0
self.leg_back = 18.0         # было 12.0

# Шаг (плавность)
self.step_threshold = 55.0   # было 30.0
self.step_duration = 0.28    # было 0.16
self.step_lift = 20.0        # было 14.0
```

## Готовые куски кода

### 1) Толщина лап (`Dragon._draw_legs`)

Найти текущие:

```python
w1 = max(1, int(2 - 1 * u))
w2 = 1
```

Заменить на:

```python
base = 5  # базовая толщина лап (px)
w1 = max(2, int(base * (1.0 - 0.45 * u)))
w2 = max(2, int((base - 1) * (1.0 - 0.55 * u)))
```

Примечание: в `task2.md` есть апгрейд, где `base` становится параметром `self.leg_thickness` (и регулируется ползунком).

### 2) Рассинхрон лево/право (`Dragon.update`, блок лап)

Найти строку вида:

```python
wave = math.sin(self.time * (self.wave_speed * 0.8) - idx * 0.18) * (1.0 - u) * 4.0
```

Заменить на:

```python
side_phase = 1.35 if leg.side < 0 else 0.0
wave = math.sin(self.time * (self.wave_speed * 0.8) - idx * 0.18 + side_phase) * (1.0 - u) * 4.0
```

### 3) (Опционально) Мягче кривая шага (`Leg.update`)

Найти:

```python
s = smoothstep01(u)
```

Заменить на:

```python
s = smoothstep01(smoothstep01(u))
```

## Критерии готовности

- Лапы выглядят заметно длиннее и толще на дефолтных параметрах.
- При движении мыши шаги не "дребезжат" и не выглядят синхронными слева/справа.
- Приложение запускается как раньше (`uv run main.py`) и управление не ломается.

## Ручная проверка

1. `uv run main.py`
2. Поводить курсором по экрану, понаблюдать шаги в `mode="hybrid"` и `mode="bones"`.
3. Включить `D` debug и убедиться, что `foot_target` не прыгает слишком часто (шагает реже, перенос заметно плавнее).
