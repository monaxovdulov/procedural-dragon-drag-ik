# Task 5: Визуальный апгрейд лап и диагональная походка

## Цель

Кратко зафиксировать изменения, которые превратили лапы из debug-линий в читаемую анатомию и убрали синхронный дёрганый шаг.

## Файлы

- `main.py`

## Что сделано

1. Переписан `Leg`:
   - добавлен `diag_id` для диагональных пар (`FL+BR`, `FR+BL`);
   - добавлен `lift01` (0..1..0 в swing) для визуального акцента шага;
   - обновлён `update()` так, чтобы `lift01` синхронно следовал фазе шага.

2. Обновлены точки крепления лап:
   - `hip` теперь смещается не от центра позвоночника, а от радиуса тела:
     `hip = point + normal * side * (radius_at(idx) + leg_hip_offset)`.

3. Добавлен простой gait controller:
   - активна только одна диагональ за такт;
   - смена диагонали происходит, когда все лапы в stance;
   - сохранены ограничения `min_stance_time`, `max_step_per_pair`, запрет одновременного шага пары.

4. Полностью переписан рендер лап:
   - бедро и голень рисуются как плотные сегменты (капсулы через `polygon + circles`);
   - бедро толще голени;
   - добавлены читаемые суставы (`hip`, `knee`);
   - стопа рисуется клином с когтями (вместо стрелок/тонких линий);
   - при `lift` лапа визуально чуть крупнее и светлее.

5. Обновлён `draw()`:
   - ноги рисуются до тела (тело частично перекрывает зону крепления);
   - добавлена заливка тела и тёмная заливка лап для лучшей читаемости.

## Критерии результата

- Лапы визуально толстые и сегментированные: `thigh -> shin -> foot`.
- Точки крепления выглядят как плечи/таз по бокам корпуса.
- Походка читается диагоналями, без старта всех 4 лап одновременно.
- В фазе переноса лапа визуально выделяется через `lift`.

## Ручная проверка

1. `uv run main.py`
2. `mode=hybrid`, поводить мышью с разной скоростью.
3. Проверить, что шагают диагонали (`FL+BR`, затем `FR+BL`).
4. Нажать `D` и убедиться, что `foot_target` стабилен в stance.
